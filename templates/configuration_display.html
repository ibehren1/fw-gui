{% extends "basic_page.html" %}
{% block body %}
<div class="config-display">
    <div class="config-header">
        <h2 class="section-title">Firewall Configuration</h2>
        <p class="config-description">
            The VyOS CLI configuration commands below can be copied and pasted to the CLI for firewall configuration, 
            or download the complete configuration using the button in the sidebar.
            <a href="https://docs.vyos.io/en/sagitta/cli.html" target="_blank" class="docs_link">
                Documentation â†—
            </a>
        </p>
    </div>
    
    {% with flashed_messages = get_flashed_messages(with_categories=true) %}
    {% if flashed_messages %}
    <div class="flash-messages">
        {% for category, flash_message in flashed_messages %}
        <div class="alert alert-{{ category }}">
            {{flash_message}}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    
    <div class="config-content">
        <div class="config-toolbar">
            <button onclick="copyToClipboard()" class="btn btn-secondary">Copy to Clipboard</button>
        </div>
        <pre class="configuration" id="config-text">{% autoescape false %}{{message}}{% endautoescape %}</pre>
    </div>
</div>

<script>
function copyToClipboard() {
    const text = document.getElementById('config-text').textContent;
    navigator.clipboard.writeText(text).then(function() {
        // Show success feedback
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'Copied!';
        btn.classList.add('btn-success');
        setTimeout(() => {
            btn.textContent = originalText;
            btn.classList.remove('btn-success');
        }, 2000);
    });
}
</script>

<style>
.config-display {
    max-width: 100%;
}

.config-header {
    margin-bottom: 2rem;
}

.config-description {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
    margin-top: 0.5rem;
}

.config-content {
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--border-radius);
    overflow: hidden;
}

.config-toolbar {
    background: rgba(0, 0, 0, 0.2);
    padding: 0.75rem 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.configuration {
    margin: 0;
    padding: 1.5rem;
    background: var(--light-color);
    color: var(--text-dark);
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.7rem !important;
    line-height: 1.5;
    overflow-x: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

.btn-success {
    background: var(--success-color) !important;
    color: var(--text-light) !important;
}
</style>
{% endblock body %}
